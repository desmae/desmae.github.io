<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GTI ChatBot - Commands & Items</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
      /* --- Main Page Layout --- */
      main {
          padding: 2rem;
          max-width: 900px;
          margin: auto;
      }

      /* --- Toggle Button Styling --- */
      .toggle-container {
          display: flex;
          margin-bottom: 1.5rem;
          border-radius: 8px;
          overflow: hidden;
          border: 1px solid rgba(0,0,0,0.1);
      }
      body.dark-mode .toggle-container {
          border-color: #444;
      }
      .toggle-btn {
          padding: 0.75em 1.5em;
          border: none;
          background-color: #eee;
          color: #333;
          cursor: pointer;
          font-size: 1rem;
          transition: background-color 0.2s ease;
      }
      body.dark-mode .toggle-btn {
          background-color: #2c2c2c;
          color: #ccc;
      }
      .toggle-btn:hover {
          background-color: #ddd;
      }
      body.dark-mode .toggle-btn:hover {
          background-color: #3d3d3d;
      }
      .toggle-btn.active {
          background-color: #ff9a9e;
          color: white;
          font-weight: bold;
      }

      /* --- New Table Styling --- */
      #item-table {
          width: 100%;
          border-collapse: separate; /* Changed for border-radius to work */
          border-spacing: 0;
          font-size: 1.1rem;
          border: 1px solid #ddd; /* Outer border */
          border-radius: 8px;      /* Rounded corners for the table */
          overflow: hidden;        /* Clips content to the rounded corners */
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      }
      body.dark-mode #item-table {
          border-color: #444;
      }

      #item-table th, #item-table td {
          padding: 0.8em 1.2em;
          text-align: left;
          border-bottom: 1px solid #ddd; /* Horizontal lines */
      }
      body.dark-mode #item-table th, body.dark-mode #item-table td {
          border-bottom: 1px solid #444;
      }
      #item-table tbody tr:last-child td {
          border-bottom: none; /* Removes bottom border from the last row */
      }

      /* Vertical Dividers */
      #item-table th:not(:last-child),
      #item-table td:not(:last-child) {
          border-right: 1px solid #ddd;
      }
      body.dark-mode #item-table th:not(:last-child),
      body.dark-mode #item-table td:not(:last-child) {
          border-right: 1px solid #444;
      }

      /* Polished Header */
      #item-table th {
          background-color: #f9f9f9;
          color: #333;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
      }
      body.dark-mode #item-table th {
          background-color: #333;
          color: #eee;
      }

      /* Better Alignment */
      #item-table th:nth-child(2), #item-table td:nth-child(2), /* Rarity Column */
      #item-table th:nth-child(3), #item-table td:nth-child(3) { /* Points Column */
          text-align: center;
      }
      
      #item-table tbody tr:hover {
          background-color: #f5f5f5;
      }
      body.dark-mode #item-table tbody tr:hover {
          background-color: #383838;
      }

      /* --- Rarity Colors --- */
      .rarity-verycommon { color: #A9A9A9; }
      .rarity-common { color: #D3D3D3; }
      .rarity-uncommon { color: #77DD77; }
      .rarity-rare { color: #AEC6CF; }
      .rarity-epic { color: #B19CD9; }
      .rarity-legendary { color: #FDFD96; }
      .rarity-custom { color: #FFB347; }

      .rarity-verycommon,
      .rarity-common,
      .rarity-uncommon,
      .rarity-rare,
      .rarity-epic,
      .rarity-legendary,
      .rarity-custom {
          text-shadow: 
              -1px -1px 0 rgba(0, 0, 0, 0.4),  
              1px -1px 0 rgba(0, 0, 0, 0.4),
              -1px  1px 0 rgba(0, 0, 0, 0.4),
              1px  1px 0 rgba(0, 0, 0, 0.4);
      }

      body.dark-mode .rarity-verycommon,
      body.dark-mode .rarity-common,
      body.dark-mode .rarity-uncommon,
      body.dark-mode .rarity-rare,
      body.dark-mode .rarity-epic,
      body.dark-mode .rarity-legendary,
      body.dark-mode .rarity-custom {
          text-shadow: none;
      }
  </style>
</head>
<body>
    <nav class="navbar">
      <div class="logo">GTI Chat Bot</div>
      <button class="hamburger-menu" aria-label="Toggle navigation" aria-expanded="false">&#9776;</button>
      <ul class="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="commands.html">Commands</a></li>
          <li><a href="features.html">New Features</a></li>
          <li><a href="changelog.html">Changelog</a></li>
          <li><a href="teaser.html">Upcoming</a></li>
          <li><button id="dark-mode-toggle" class="dark-mode-btn">Dark Mode</button></li>
      </ul>
  </nav>
  
    <div class="container">
        <section id="commands">
            <h2>Chat Commands</h2>
            <p>Here are the available commands for viewers in the YouTube chat.</p>
            <div class="table-container">
                <table class="command-table">
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Alias(es)</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>!guess &lt;item&gt;</code></td>
                            <td><code>!g</code>, <code>!gi</code></td>
                            <td>Locks in your guess for the next item.</td>
                        </tr>
                        <tr>
                            <td><code>!guessdungeon &lt;dungeon&gt;</code></td>
                            <td><code>!gd</code></td>
                            <td>Locks in your dungeon guess. (30 min cooldown)</td>
                        </tr>
                        <tr>
                            <td><code>!guessboss &lt;boss&gt;</code></td>
                            <td><code>!gb</code></td>
                            <td>Locks in your boss guess. (30 min cooldown)</td>
                        </tr>
                        <tr>
                            <td><code>!myguess</code></td>
                            <td><code>!mg</code></td>
                            <td>Shows all of your currently locked-in guesses.</td>
                        </tr>
                        <tr>
                            <td><code>!myscore</code></td>
                            <td><code>!score</code></td>
                            <td>Shows your current score.</td>
                        </tr>
                        <tr>
                            <td><code>!mystreak</code></td>
                            <td><code>!ms</code></td>
                            <td>Shows your current guess streak.</td>
                        </tr>
                        <tr>
                            <td><code>!leaderboard</code></td>
                            <td>-</td>
                            <td>Displays the top players in the chat.</td>
                        </tr>
                        <tr>
                            <td><code>!random</code></td>
                            <td>-</td>
                            <td>Locks in a random item as your guess.</td>
                        </tr>
                        <tr>
                            <td><code>!settext &lt;message&gt;</code></td>
                            <td><code>!st</code></td>
                            <td>Sets a custom victory message if you win.</td>
                        </tr>
                        <tr>
                            <td><code>!viewtext</code></td>
                            <td><code>!vt</code></td>
                            <td>Lets you see your current victory text.</td>
                        </tr>
                        <tr>
                            <td><code>!anonymous [name]</code></td>
                            <td>-</td>
                            <td>Toggles anonymous mode or sets a custom anonymous name.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <hr style="margin: 3rem 0;">

        <section id="item-list">
            <h2>Guessable Items</h2>
            <p>Use the buttons below to toggle between games. The table shows all items you can use with the <code>!guess</code> command.</p>

            <div class="toggle-container">
                <button id="oot-btn" class="toggle-btn active">Ocarina of Time</button>
                <button id="mm-btn" class="toggle-btn">Majora's Mask</button>
            </div>
            
            <div class="table-container">
                <table id="item-table">
                    <thead>
                        <tr>
                            <th>Item Name</th>
                            <th>Rarity</th>
                            <th>Points</th>
                        </tr>
                    </thead>
                    <tbody id="item-table-body">
                        </tbody>
                </table>
            </div>
        </section>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Hamburger Menu & Dark Mode Logic (from your index.html) ---
        const hamburger = document.querySelector('.hamburger-menu');
        const navLinks = document.querySelector('.nav-links');
        const toggleButton = document.getElementById('dark-mode-toggle');

        if (hamburger && navLinks) {
            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
                const isExpanded = navLinks.classList.contains('active');
                hamburger.setAttribute('aria-expanded', isExpanded);
                hamburger.innerHTML = isExpanded ? '&times;' : '&#9776;';
            });
        }
        
        function enableDarkMode() {
            document.body.classList.add('dark-mode');
            localStorage.setItem('darkMode', 'enabled');
            if (toggleButton) toggleButton.textContent = "Light Mode";
        }

        function disableDarkMode() {
            document.body.classList.remove('dark-mode');
            localStorage.setItem('darkMode', 'disabled');
            if (toggleButton) toggleButton.textContent = "Dark Mode";
        }

        if (localStorage.getItem('darkMode') === 'enabled') {
            enableDarkMode();
        } else {
            disableDarkMode();
        }

        if (toggleButton) {
            toggleButton.addEventListener('click', () => {
                document.body.classList.contains('dark-mode') ? disableDarkMode() : enableDarkMode();
            });
        }

        // --- Item Table Logic (from your previous commands.html) ---
        const ootBtn = document.getElementById('oot-btn');
        const mmBtn = document.getElementById('mm-btn');
        const tableBody = document.getElementById('item-table-body');
        
        if (ootBtn && mmBtn && tableBody) {
            const OOT_ITEMS_PATH = '/oot_data/items.json';
            const MM_ITEMS_PATH = '/mm_data/items.json';

            const RARITY_POINTS = {"Common": 1, "Uncommon": 3, "Rare": 5, "Epic": 7, "Legendary": 10, "VeryCommon": 1, "Custom": 1};
            const CUSTOM_ITEM_POINTS = {"Greg the Rupee": 20, "Triforce Piece": 5, "Bomber's Notebook": 20};

            let ootItems = null;
            let mmItems = null;

            function getPoints(itemName, rarity) {
                if (rarity === "Custom" && CUSTOM_ITEM_POINTS[itemName]) {
                    return CUSTOM_ITEM_POINTS[itemName];
                }
                return RARITY_POINTS[rarity] || 1;
            }

            function populateTable(itemData) {
                tableBody.innerHTML = '<tr><td colspan="3">Loading items...</td></tr>';
                if (!itemData) return;
                tableBody.innerHTML = '';
                const allItems = [];
                for (const rarity in itemData) {
                    if (Array.isArray(itemData[rarity])) {
                        itemData[rarity].forEach(item => allItems.push({ ...item, rarity: rarity }));
                    }
                }
                allItems.sort((a, b) => {
                    const nameA = a.name || ''; // Default to an empty string if name is missing
                    const nameB = b.name || ''; // Default to an empty string if name is missing
                    return nameA.localeCompare(nameB);
                });
                for (const item of allItems) {
                    const row = document.createElement('tr');
                    const rarityClass = `rarity-${item.rarity.toLowerCase().replace(/\s+/g, '')}`;
                    row.innerHTML = `
                        <td><span class="${rarityClass}">${item.name}</span></td>
                        <td>${item.rarity}</td>
                        <td>${getPoints(item.name, item.rarity)}</td>
                    `;
                    tableBody.appendChild(row);
                }
            }

            async function initializeItems() {
                try {
                    const [ootResponse, mmResponse] = await Promise.all([fetch(OOT_ITEMS_PATH), fetch(MM_ITEMS_PATH)]);
                    ootItems = await ootResponse.json();
                    mmItems = await mmResponse.json();
                    populateTable(ootItems);
                } catch (error) {
                    console.error("Failed to load item data:", error);
                    tableBody.innerHTML = '<tr><td colspan="3" style="color: #ff6b6b;">Error: Could not load item data.</td></tr>';
                }
            }

            ootBtn.addEventListener('click', () => {
                mmBtn.classList.remove('active');
                ootBtn.classList.add('active');
                populateTable(ootItems);
            });

            mmBtn.addEventListener('click', () => {
                ootBtn.classList.remove('active');
                mmBtn.classList.add('active');
                populateTable(mmItems);
            });

            initializeItems();
        }
    });
    </script>
</body>
</html>